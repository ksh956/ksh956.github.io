---
layout: single
title:  "[Vue.js] 컴포넌트 심화2"
categories: Vue
tag: [Vue]
toc: true
author_profile: false
sidebar:
    nav: "docs"
search: true   # 검색설정
---


### 부모 컴포넌트에서 자식 컴포넌트의 이벤트 직접 발생시키기
부모 컴포넌트에서 자식 컴포넌트의 버튼을 클릭하는 이벤트를 만들어보자

`ChildComponent.vue`
```vue
<template>
    <button type="button" @click="childFunc" ref="btn">click</button>
</template>
<script>
export default{ 
    methods:{
        childFunc(){
            console.log('부모 컴포넌트에서 직접 발생시킨 이벤트');
        }
    }
}
</script>
```

위처럼 자식 컴포넌트 생성.
ref='btn' 으로 접근할 수 있도록 작성했다.

HTML 태그에 ref='id'를 지정하면 Vue 컴포넌트의 함수에서 this.$refs를 통해 접근이 가능하게 된다. ref 속성은 HTML 태그에서 사용되는 id와 비슷한 기능을 한다고 생각하면 된다.
ref는 유일한 키 값을 사용해야 한다.

`ParentComponent.vue`
```vue
<template>
    <child-component @send-message="sendMessage" ref="child-component" />
</template>
<script>
import ChildComponent from './ChildComponent';

export default{ 
    components:{ChildComponent},
    mounted() {
        this.$refs.child_component.$refs.btn.click()
    }
}
</script>
```

부모 컴포넌트에서 자식 컴포넌트인 child-component에 ref='child_component'를 지정해서 $refs로 접근할 수 있도록 했다.

이렇게 하면 부모 컴포넌트의 버튼을 클릭하여 자식 컴포넌트의 버튼 클릭 이벤트를 실행 => consol.log가 실행된다.

### 부모 컴포넌트에서 자식 컴포넌트의 함수 직접 호출하기

ChildComponent2
```vue
<template>
<div></div>
</template>
<script>
export default{ 
    methods:{
        callFromParent(){
            console.log('부모 컴포넌트에서 직접 호출한 함수')
        }
    }
}
</script>
```

ParentComponent2

```vue
<template>
    <child-component @send-message="sendMessage" ref="child_component" />
</template>
<script>
import ChildComponent from './ChildComponent2';

export default{ 
    components:{ChildComponent},
    mounted() {
        this.$refs.child_component.callFromParent();
    }
}
</script>
```

부모 컴포넌트에서는 자식 컴포넌트를 $refs를 사용하여 접근하게 되면 자식 컴포넌트 내에 정의된 모든 함수를 호출할 수 있다.


### 부모 컴포넌트에서 자식 컴포넌트의 데이터 옵션 값 직접 변경하기

```vue     {%raw%}
<template>
    <h1>{{ msg }}</h1>
</template>  {% endraw %}
<script>
export default{ 
    data(){
        return{
            msg : '야호~'
        };
    }
}
</script>
```
ChildComponent3에서 위처럼 msg에 특정 문구를 담아주고

ParentComponent3에서

```vue
<template>
    <child-component  ref="child_component" />
    <button type = "button" @click="changeChildData">change Child Data</button>
</template>
<script>
import ChildComponent from './ChildComponent3';
export default{ 
    components:{ChildComponent},
    methods:{
        changeChildData(){
            this.$refs.child_component.msg = "부모 컴포넌트가 변경한 데이터"
        }
    }
}
</script>
```

위 화면에서 처음 로딩되는 화면에는 위에서 담았던 