---
layout: single
title:  "Vue.js 기초 - Vue Router 설정"
categories: Vue
tag: [Vue]
toc: true
author_profile: false
sidebar:
    nav: "docs"
search: true   # 검색설정
---


### 라우팅이란?

특정 웹 페이지에 접속했을 때, 메뉴 또는 특정 링크를 클릭했을 때 화면이 전환되는 때.
이때 브라우저 주소란에 페이지가 이동될 때마다 url이 달라지는것을 볼 수 있다.

Vue와 같이 단일 페이지 APP의 경우 페이지를 이동할 때마다 서버에 요청해서 페이지를 새로 갱신하는 것이 아니라 클라이언트에서 미리 가지고 있던 페이지를 라우팅을 이용해서 화면을 갱신하게 된다.

라우팅이란 클라이언트에서 url 주소에 따라 페이지가 전환되는 것으로 이해하면 된다. 
일반적인 웹 프로젝트가 아닌 Vue 프로젝트 내부에서는 미리 url 주소를 정의하고, 각 주소마다 Vue 페이지를 연결해 놓는다.
사용자가 메뉴를 클릭하거나, 브라우저 주소를 갱신했을 때 미리 정의된 url 주소에 해당하는 Vue 페이지로 화면 전환한다.

Vue는 vue에서 제공하는 공식 플러그인인 vue-router를 이용해서 라우팅을 쉽게 구현할 수 있다.


### Vue-Router 설치

이 전 포스팅에서 3가지의 프로젝트를 생성했지만 Router과 Vuex에 대해서 직접 설치하며 알아볼 것이기에 가장 처음 기본으로 생성했던 vue-project로 이동한다.


![Alt text](/assets/images/라우터생성.png)

터미널에 명령어 입력해서 라우터 설치 및 기본 설정을 완료할 수 있다.

![Alt text](/assets/images/라우터히스토리.png)

@vue/cli-plugin-router가 설치된다.

![Alt text](/assets/images/라우터src.png)

설치가 완료되면 src 폴더에 router, views 퐅더와 파일이 생성된다.

이 상태에서 npm run serve 명령어를 입력하여 서버를 재시작한다.

서버 기동 후 http://localhost:8081/ 로컬주소를 통해 접속해본다.


![Alt text](/assets/images/vue화면.png)

화면 상단에 Home, About 두 개의 링크가 있다.  둘 다 클릭해보면 화면이 전환되는 것을 확인할 수 있다.
vue-router을 설치했으니 자동으로 시작 화면에 링크가 추가되고, routher가 동작되는 샘플 파일이 자동으로 생성된 것. 


App.vue 파일을 열어보면


```java
<template>
  <nav>
    <router-link to="/">Home</router-link>
    <router-link to="/about">About</router-link>
  </nav>
  <router-view/>
</template>
```

`<router-link to="/">Home</router-link>` 와

`<router-link to="/about">About</router-link>` 부분이 있다.

링크에서 Home과 About을 눌러보면 Home을 눌렀을때는 url이 http://localhost:8081/이고
About을 누르면 http://localhost:8081/about으로 바뀌는 것을 확인할 수 있다. url창에서 확인되는 주소에 해당하는 부분이 router-link to="여기"와 동일한 것을 알 수 있다.


이번에는 router 폴더의 index.js파일을 열어보면

```java
import { createRouter, createWebHistory } from 'vue-router'
import HomeView from '../views/HomeView.vue'

const routes = [
  {
    path: '/',
    name: 'home',
    component: HomeView
  },
  {
    path: '/about',
    name: 'about',
    // route level code-splitting
    // this generates a separate chunk (about.[hash].js) for this route
    // which is lazy-loaded when the route is visited.
    component: () => import(/* webpackChunkName: "about" */ '../views/AboutView.vue')
  }
]

const router = createRouter({
  history: createWebHistory(process.env.BASE_URL),
  routes
})

export default router
```
router 배열에는 2개의 라우터가 등록되어 있는것을 볼 수 있다.

첫 번째는 home 컴포넌트이고, 두 번째는 about 컴포넌트에 대한 라우트이다.

```java
    path: '/',    name: 'home',    component: HomeView
```
=> path : 브라우저에서 접속하는 url 주소를 정의한다.
=> component: 지정된 path로 들어왔을 때 보여줄 vue 컴포넌트


index.js 파일 두 번쨰 줄에 있는 import HomeView from '../views/HomeView.vue'가 실제 src->views 폴더에 있는 Home.vue 파일을 참조한다.
앞으로 개발할 화면에 해당하는 vue 파일을 이렇게 import하고, router 안에 특정 path와 맵핑을 해주면 사용자가 접속하는 브라우저 url 주소에 따라 원하는 vue 파일을 보여줄 수 있다.

router 배열 두번쨰 값(about 부분)에 path와 name 밑에 주석 처리된 부분이 있다.

```
// route level code-splitting
```
=> 라우트 레벨에서 코드를 분할하는 방법
```
// this generates a separate chunk (about.[hash].js) for this route
```
=> 이 라우트에 대한 chunk 파일이 분리되어 생성된다.
```
// which is lazy-loaded when the route is visited.
```
=> 이 라우트에 방문했을 때 lazy-load(지연로드) 된다.

```html
 component: () => import(/* webpackChunkName: "about" */ '../views/AboutView.vue')
```
=> 주석처럼 라우트 레벨에서 코드를 분할한 후 별도의 chunk 파일을 생성하고, 실제 이 라우트를 방문했을 때 리소스를 로드하게 된다.
여기서 chunk 파일은 about이라는 이름으로 생성된다. 컴포넌트 import 시 /* webpackChunkName: "about" */ 라는 주석으로 chunk 파일 이름을 정의했기 때문

첫 번째 등록된 라우트와(Home) 두 번째 등록된 라우트의(About) 가장 큰 차이는 첫 번째는 사용자가 해당 path에 접근하지 않더라도 이미 vue 파일을 import 하는 것이고(2번째 줄에서 미리 import), 두 번째 방법은 path에 접근하기 전까지는 vue 파일에 대한 import가 일어나지 않는다.(해당 path 접근 시 내부에서 import 진행)


### Lazy Load 적용 (비동기 컴포넌트)
